import{r as c,o as l,c as d,a,b as _,w as h,d as y,e as b,f as x,g as B,t as g,F as D,h as E,i as m,v as S,j as k,k as A,l as v,m as C,C as F,n as O,D as I,p as L,q as N,s as P,u as V}from"./vendor.28a03c10.js";const U=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function s(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=s(o);fetch(o.href,n)}};U();var u=(e,t)=>{const s=e.__vccOpts||e;for(const[i,o]of t)s[i]=o;return s};const q={},R=y(" this is a header "),z=y("Dashboard"),J=y("Toys");function M(e,t){const s=c("router-link");return l(),d("header",null,[R,a("nav",null,[_(s,{to:"/"},{default:h(()=>[z]),_:1}),_(s,{to:"/toy"},{default:h(()=>[J]),_:1})])])}var H=u(q,[["render",M]]);const j={name:"app",data(){return{isReady:!1}},created(){this.$store.dispatch({type:"loadToys"}).then(()=>this.isReady=!0)},components:{appHeader:H}},W={class:"app-container container",container:""};function K(e,t,s,i,o,n){const r=c("app-header"),p=c("router-view");return l(),d("section",W,[_(r),o.isReady?(l(),b(p,{key:0})):x("",!0)])}var G=u(j,[["render",K]]);const Q="modulepreload",w={},X="/",Y=function(t,s){return!s||s.length===0?t():Promise.all(s.map(i=>{if(i=`${X}${i}`,i in w)return;w[i]=!0;const o=i.endsWith(".css"),n=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${n}`))return;const r=document.createElement("link");if(r.rel=o?"stylesheet":Q,o||(r.as="script",r.crossOrigin=""),r.href=i,document.head.appendChild(r),o)return new Promise((p,T)=>{r.addEventListener("load",p),r.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())};const Z={},tt={class:"custom-card flex flex-col gap-1 items-center"};function et(e,t){return l(),d("article",tt,[a("header",null,[B(e.$slots,"header",{},void 0,!0)]),a("main",null,[B(e.$slots,"default",{},void 0,!0)]),a("footer",null,[B(e.$slots,"footer",{},void 0,!0)])])}var ot=u(Z,[["render",et],["__scopeId","data-v-d9a2c756"]]);const rt={props:{_id:String},components:{},created(){},data(){return{}},methods:{removeToy(e){this.$store.dispatch({type:"removeToy",_id:e})}},computed:{editPath(){return`/toy/edit/${this._id}`},detailsPath(){return`/toy/${this._id}`}},unmounted(){}},nt={key:0},st=y("Edit"),at=y("See More");function it(e,t,s,i,o,n){const r=c("router-link");return s._id?(l(),d("section",nt,[_(r,{to:n.editPath,class:"btn btn-primary"},{default:h(()=>[st]),_:1},8,["to"]),_(r,{to:n.detailsPath,class:"btn btn-info"},{default:h(()=>[at]),_:1},8,["to"]),a("button",{onClick:t[0]||(t[0]=p=>n.removeToy(s._id)),class:"btn btn-danger"},"Delete")])):x("",!0)}var lt=u(rt,[["render",it]]);const ct={props:{toy:{type:Object,required:!0}},components:{customCard:ot,itemActions:lt},created(){},data(){return{}},methods:{},computed:{inStockTxt(){return this.toy.inStock?"In stock":"Out of stock"}},unmounted(){}},dt={class:"toy-preview costum-card"},ut=a("span",{class:"fw-bold"},"Name:",-1),pt=a("span",{class:"fw-bold"},"Price:",-1),_t=a("span",{class:"fw-bold stock-status"},"inStockTxt",-1);function yt(e,t,s,i,o,n){const r=c("item-actions"),p=c("custom-card");return l(),d("li",dt,[_(p,null,{header:h(()=>[a("p",null,[ut,y(" "+g(s.toy.name),1)]),a("p",null,[pt,y(" "+g(s.toy.price)+" ",1),_t])]),footer:h(()=>[_(r,{_id:s.toy._id},null,8,["_id"])]),_:1})])}var ht=u(ct,[["render",yt]]);const mt={props:{toys:{type:Array,required:!0}},components:{toyPreview:ht},created(){},data(){return{}},methods:{},computed:{},unmounted(){}},ft={class:"toy-list clean-list grid gap-1"};function vt(e,t,s,i,o,n){const r=c("toy-preview");return l(),d("ul",ft,[(l(!0),d(D,null,E(s.toys,p=>(l(),b(r,{toy:p,key:p._id},null,8,["toy"]))),128))])}var $t=u(mt,[["render",vt]]);const gt={name:"toy-filter",data(){return{filterBy:{name:"",inStock:"",labels:[],sortBy:""}}},methods:{setFilter(){this.$emit("setFilter",JSON.parse(JSON.stringify(this.filterBy)))}}},bt={class:"toy-filter"},Tt=y(" Stock: "),Bt=a("option",{value:""},"All",-1),kt=a("option",{value:"true"},"In stock",-1),St=a("option",{value:"false"},"Not in stock",-1),xt=[Bt,kt,St],wt=y(" Labels: "),Dt=A('<option value="On wheels">On wheels</option><option value="Box game">Box game</option><option value="Art">Art</option><option value="Baby">Baby</option><option value="Doll">Doll</option><option value="Puzzle">Puzzle</option><option value="Outdoor">Outdoor</option>',7),Et=[Dt],At=y(" Sort By: "),Ct=a("option",{value:"createdAt"},"Time",-1),Ft=a("option",{value:"name"},"Name",-1),Ot=a("option",{value:"price"},"Price",-1),It=[Ct,Ft,Ot];function Lt(e,t,s,i,o,n){return l(),d("section",bt,[m(a("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.filterBy.name=r),onInput:t[1]||(t[1]=(...r)=>n.setFilter&&n.setFilter(...r)),type:"text",placeholder:"Search toy.."},null,544),[[S,o.filterBy.name]]),a("label",null,[Tt,m(a("select",{onChange:t[2]||(t[2]=(...r)=>n.setFilter&&n.setFilter(...r)),"onUpdate:modelValue":t[3]||(t[3]=r=>o.filterBy.inStock=r)},xt,544),[[k,o.filterBy.inStock]])]),a("label",null,[wt,m(a("select",{onChange:t[4]||(t[4]=(...r)=>n.setFilter&&n.setFilter(...r)),multiple:"","onUpdate:modelValue":t[5]||(t[5]=r=>o.filterBy.labels=r)},Et,544),[[k,o.filterBy.labels]]),a("label",null,[At,m(a("select",{onChange:t[6]||(t[6]=(...r)=>n.setFilter&&n.setFilter(...r)),"onUpdate:modelValue":t[7]||(t[7]=r=>o.filterBy.sortBy=r)},It,544),[[k,o.filterBy.sortBy]])])])])}var Nt=u(gt,[["render",Lt]]);const Pt={name:"toy-app",methods:{setFilter(e){console.log(e),this.$store.dispatch({type:"filter",filterBy:e})}},computed:{toys(){return this.$store.getters.toys}},components:{toyList:$t,toyFilter:Nt}},Vt={class:"toy-app container flex flex-col gap-1"},Ut=y("Add Toy");function qt(e,t,s,i,o,n){const r=c("router-link"),p=c("toy-filter"),T=c("toy-list");return l(),d("main",Vt,[_(r,{to:"/toy/edit"},{default:h(()=>[Ut]),_:1}),_(p,{onSetFilter:n.setFilter},null,8,["onSetFilter"]),n.toys?(l(),b(T,{key:0,toys:n.toys},null,8,["toys"])):x("",!0)])}var Rt=u(Pt,[["render",qt]]);const f={save:Ht,query:zt,remove:Jt,getById:Mt,getEmptyToy:Kt},$="/api/toy/";function zt(e){return console.log(e),v.get($,{params:e}).then(t=>t.data).catch(t=>{throw t})}function Jt(e){return v.delete(`${$}/${e}`)}function Mt(e){return v.get(`${$}/${e}`).then(t=>t.data).then(t=>(t.reviews=[{txt:"It was great!",createdAt:Date.now()}],t)).catch(t=>{throw t})}function Ht(e){return e._id?jt(e):Wt(e)}function jt(e){return v.put($,e).then(t=>t.data).catch(t=>{throw t})}function Wt(e){return e.createdAt=Date.now(),v.post($,e).then(t=>t.data).catch(t=>{throw t})}function Kt(){return{_id:"",name:"",price:123,labels:[],createdAt:0,inStock:!0}}const Gt={components:{},created(){},data(){return{toyToEdit:{}}},watch:{"this.$route.params.toyId":{handler(){const e=this.$route.params.toyId;e?f.getById(e).then(t=>this.toyToEdit=t):this.toyToEdit=f.getEmptyToy()},immediate:!0}},methods:{saveToy(){this.$router.push("/toy"),this.$store.dispatch({type:"saveToy",toy:this.toyToEdit})}},computed:{},unmounted(){}},Qt=a("button",{class:"btn"},"save",-1);function Xt(e,t,s,i,o,n){return l(),d("section",null,[a("pre",null,"            "+g(o.toyToEdit)+`\r
        `,1),a("form",{onSubmit:t[2]||(t[2]=C((...r)=>n.saveToy&&n.saveToy(...r),["prevent"]))},[m(a("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=r=>o.toyToEdit.name=r),placeholder:"Name"},null,512),[[S,o.toyToEdit.name]]),m(a("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=r=>o.toyToEdit.price=r),placeholder:"Price"},null,512),[[S,o.toyToEdit.price]]),Qt],32)])}var Yt=u(Gt,[["render",Xt]]);const Zt={components:{},created(){},data(){return{toy:{}}},watch:{"this.$route.params.toyId":{handler(){f.getById(this.$route.params.toyId).then(e=>this.toy=e)},immediate:!0}},methods:{},computed:{},unmounted(){}},te={class:"toy-details"};function ee(e,t,s,i,o,n){return l(),d("section",te,[a("pre",null,"            "+g(o.toy)+`\r
        `,1)])}var oe=u(Zt,[["render",ee]]);F.register(...O);const re={name:"dashboard-chart",props:{labels:Array,chartData:Array},computed:{testData(){return{labels:this.labels,datasets:[{data:this.chartData,backgroundColor:["#77CEFF","#0079AF","#123E6B","#97B0C4","#A5C8ED"]}]}}},components:{DoughnutChart:I}};function ne(e,t,s,i,o,n){const r=c("DoughnutChart");return l(),b(r,{chartData:n.testData},null,8,["chartData"])}var se=u(re,[["render",ne]]);const ae={data(){return{labels:this.$store.getters.labels}},components:{dashboardChart:se},computed:{pricesByType(){console.log("pricesByType ran");const e=(t,s)=>t+s.price;return this.$store.getters.detailByType(e)},stockByType(){console.log("stockByType ran");const e=(t,s)=>s.inStock?++t:t;return this.$store.getters.detailByType(e)}}};function ie(e,t,s,i,o,n){const r=c("dashboard-chart");return l(),d("main",null,[_(r,{labels:o.labels,chartData:n.pricesByType},null,8,["labels","chartData"]),_(r,{labels:o.labels,chartData:n.stockByType},null,8,["labels","chartData"])])}var le=u(ae,[["render",ie]]);const ce=L({history:N(),linkActiveClass:"active",routes:[{path:"/",name:"home",component:le},{path:"/toy",name:"toy-app",component:Rt},{path:"/toy/:toyId",name:"toy-details",component:oe},{path:"/toy/edit/:toyId?",name:"toy-edit",component:Yt},{path:"/about",name:"about",component:()=>Y(()=>import("./AboutView.41450f22.js"),["assets/AboutView.41450f22.js","assets/AboutView.ab071ea6.css","assets/vendor.28a03c10.js"])}]});var de={strict:!0,state:{toys:[],filterBy:{},labels:["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor","Battery Powered"]},getters:{toys(e){return JSON.parse(JSON.stringify(e.toys))},labels(e){return JSON.parse(JSON.stringify(e.labels))},detailByType:e=>t=>{if(!!e.toys.length)return e.labels.reduce((s,i)=>(s.push(e.toys.filter(o=>o.labels.includes(i)).reduce(t,0)),s),[])}},mutations:{setToys(e,{toys:t}){e.toys=t},removeToy(e,{_id:t}){const s=e.toys.findIndex(i=>i._id===t);e.toys.splice(s,1)},setFilter(e,{filterBy:t}){e.filterBy=t}},actions:{loadToys({commit:e,state:t}){e({type:"setIsLoading",isLoading:!0}),f.query(t.filterBy).then(s=>e({type:"setToys",toys:s})).then(()=>{e({type:"setIsLoading",isLoading:!1})}).catch(()=>{console.log("couldnt load toys")})},removeToy({commit:e},t){f.remove(t._id).then(()=>{e(t)}).catch(()=>{console.log("couldnt remove toy")})},saveToy({dispatch:e},t){f.save(t.toy).then(()=>e("loadToys")).catch(()=>{console.log("couldnt save toy")})},filter({commit:e,dispatch:t},{filterBy:s}){e({type:"setFilter",filterBy:s}),t({type:"loadToys"})}}};const ue=P({strict:!0,state:{isLoading:!0},mutations:{setIsLoading(e,{isLoading:t}){e.isLoading=t}},modules:{toyStore:de}});V(G).use(ce).use(ue).mount("#app");export{u as _};
